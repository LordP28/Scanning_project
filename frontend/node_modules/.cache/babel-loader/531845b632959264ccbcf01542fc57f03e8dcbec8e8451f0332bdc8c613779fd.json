{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, createTextVNode as _createTextVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"registration-container\"\n};\nvar _hoisted_2 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_input = _resolveComponent(\"el-input\");\n  var _component_el_form_item = _resolveComponent(\"el-form-item\");\n  var _component_el_option = _resolveComponent(\"el-option\");\n  var _component_el_select = _resolveComponent(\"el-select\");\n  var _component_Plus = _resolveComponent(\"Plus\");\n  var _component_el_icon = _resolveComponent(\"el-icon\");\n  var _component_el_upload = _resolveComponent(\"el-upload\");\n  var _component_el_button = _resolveComponent(\"el-button\");\n  var _component_el_form = _resolveComponent(\"el-form\");\n  var _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    \"class\": \"registration-card\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Student Registration\", -1 /* HOISTED */)), _createVNode(_component_el_form, {\n        model: $setup.form,\n        rules: $setup.rules,\n        ref: \"formRef\",\n        \"label-width\": \"100px\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_el_form_item, {\n            label: \"Student ID\",\n            prop: \"student_id\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_input, {\n                modelValue: $setup.form.student_id,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n                  return $setup.form.student_id = $event;\n                }),\n                placeholder: \"Enter student ID\"\n              }, null, 8 /* PROPS */, [\"modelValue\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"First Name\",\n            prop: \"first_name\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_input, {\n                modelValue: $setup.form.first_name,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                  return $setup.form.first_name = $event;\n                }),\n                placeholder: \"Enter first name\"\n              }, null, 8 /* PROPS */, [\"modelValue\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"Last Name\",\n            prop: \"last_name\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_input, {\n                modelValue: $setup.form.last_name,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n                  return $setup.form.last_name = $event;\n                }),\n                placeholder: \"Enter last name\"\n              }, null, 8 /* PROPS */, [\"modelValue\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"Major\",\n            prop: \"major\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_select, {\n                modelValue: $setup.form.major,\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n                  return $setup.form.major = $event;\n                }),\n                placeholder: \"Select major\"\n              }, {\n                \"default\": _withCtx(function () {\n                  return [_createVNode(_component_el_option, {\n                    label: \"Computer Science\",\n                    value: \"Computer Science\"\n                  }), _createVNode(_component_el_option, {\n                    label: \"Engineering\",\n                    value: \"Engineering\"\n                  }), _createVNode(_component_el_option, {\n                    label: \"Business\",\n                    value: \"Business\"\n                  }), _createVNode(_component_el_option, {\n                    label: \"Arts\",\n                    value: \"Arts\"\n                  })];\n                }),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"modelValue\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"Profile Picture\",\n            prop: \"profile_picture\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_upload, {\n                \"class\": \"avatar-uploader\",\n                \"auto-upload\": false,\n                \"show-file-list\": false,\n                \"on-change\": $setup.handleFileChange,\n                \"before-upload\": $setup.beforeUpload\n              }, {\n                \"default\": _withCtx(function () {\n                  return [$setup.form.profile_picture ? (_openBlock(), _createElementBlock(\"img\", {\n                    key: 0,\n                    src: $setup.form.profile_picture,\n                    \"class\": \"avatar\"\n                  }, null, 8 /* PROPS */, _hoisted_2)) : (_openBlock(), _createBlock(_component_el_icon, {\n                    key: 1,\n                    \"class\": \"avatar-uploader-icon\"\n                  }, {\n                    \"default\": _withCtx(function () {\n                      return [_createVNode(_component_Plus)];\n                    }),\n                    _: 1 /* STABLE */\n                  }))];\n                }),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"on-change\", \"before-upload\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, null, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_button, {\n                type: \"primary\",\n                onClick: $setup.handleSubmit,\n                loading: $setup.loading\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[4] || (_cache[4] = [_createTextVNode(\"Register Student\")]);\n                }),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"onClick\", \"loading\"])];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"model\", \"rules\"])];\n    }),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createVNode","_component_el_card","_withCtx","_createElementVNode","_component_el_form","model","$setup","form","rules","ref","_component_el_form_item","label","prop","_component_el_input","modelValue","student_id","_cache","$event","placeholder","_","first_name","last_name","_component_el_select","major","_component_el_option","value","_component_el_upload","handleFileChange","beforeUpload","profile_picture","key","src","_hoisted_2","_createBlock","_component_el_icon","_component_Plus","_component_el_button","type","onClick","handleSubmit","loading","_createTextVNode"],"sources":["C:\\Users\\hp\\SOFTWARE\\OFFICIAL APP\\frontend\\src\\components\\StudentRegistration.vue"],"sourcesContent":["<template>\r\n  <div class=\"registration-container\">\r\n    <el-card class=\"registration-card\">\r\n      <h2>Student Registration</h2>\r\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"100px\">\r\n        <el-form-item label=\"Student ID\" prop=\"student_id\">\r\n          <el-input v-model=\"form.student_id\" placeholder=\"Enter student ID\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"First Name\" prop=\"first_name\">\r\n          <el-input v-model=\"form.first_name\" placeholder=\"Enter first name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"Last Name\" prop=\"last_name\">\r\n          <el-input v-model=\"form.last_name\" placeholder=\"Enter last name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"Major\" prop=\"major\">\r\n          <el-select v-model=\"form.major\" placeholder=\"Select major\">\r\n            <el-option label=\"Computer Science\" value=\"Computer Science\"></el-option>\r\n            <el-option label=\"Engineering\" value=\"Engineering\"></el-option>\r\n            <el-option label=\"Business\" value=\"Business\"></el-option>\r\n            <el-option label=\"Arts\" value=\"Arts\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"Profile Picture\" prop=\"profile_picture\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            :auto-upload=\"false\"\r\n            :show-file-list=\"false\"\r\n            :on-change=\"handleFileChange\"\r\n            :before-upload=\"beforeUpload\"\r\n          >\r\n            <img v-if=\"form.profile_picture\" :src=\"form.profile_picture\" class=\"avatar\">\r\n            <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleSubmit\" :loading=\"loading\">Register Student</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from 'axios'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Plus } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'StudentRegistration',\r\n  components: {\r\n    Plus\r\n  },\r\n  setup() {\r\n    const router = useRouter()\r\n    const formRef = ref(null)\r\n    const form = reactive({\r\n      student_id: '',\r\n      first_name: '',\r\n      last_name: '',\r\n      major: '',\r\n      profile_picture: null\r\n    })\r\n    const loading = ref(false)\r\n\r\n    const rules = {\r\n      student_id: [\r\n        { required: true, message: 'Please enter student ID', trigger: 'blur' },\r\n        { pattern: /^[A-Z0-9]+$/, message: 'Student ID must contain only uppercase letters and numbers', trigger: 'blur' }\r\n      ],\r\n      first_name: [\r\n        { required: true, message: 'Please enter first name', trigger: 'blur' },\r\n        { min: 2, message: 'First name must be at least 2 characters', trigger: 'blur' }\r\n      ],\r\n      last_name: [\r\n        { required: true, message: 'Please enter last name', trigger: 'blur' },\r\n        { min: 2, message: 'Last name must be at least 2 characters', trigger: 'blur' }\r\n      ],\r\n      major: [\r\n        { required: true, message: 'Please select a major', trigger: 'change' }\r\n      ]\r\n    }\r\n\r\n    const handleFileChange = (file) => {\r\n      form.profile_picture = file.raw\r\n    }\r\n\r\n    const beforeUpload = (file) => {\r\n      const isImage = file.type.startsWith('image/')\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isImage) {\r\n        ElMessage.error('Upload file can only be image format!')\r\n        return false\r\n      }\r\n      if (!isLt2M) {\r\n        ElMessage.error('Upload file size can not exceed 2MB!')\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n      if (!formRef.value) return\r\n      \r\n      try {\r\n        await formRef.value.validate()\r\n        loading.value = true\r\n        \r\n        const formData = new FormData()\r\n        formData.append('student_id', form.student_id)\r\n        formData.append('first_name', form.first_name)\r\n        formData.append('last_name', form.last_name)\r\n        formData.append('major', form.major)\r\n        \r\n        if (form.profile_picture) {\r\n          formData.append('profile_picture', form.profile_picture)\r\n        }\r\n\r\n        const response = await axios.post('http://localhost:3000/api/students', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        })\r\n\r\n        ElMessage.success('Student registered successfully')\r\n        router.push({\r\n          name: 'QRCodeDisplay',\r\n          query: {\r\n            qr_code_url: response.data.qr_code_url,\r\n            student: JSON.stringify({\r\n              student_id: form.student_id,\r\n              first_name: form.first_name,\r\n              last_name: form.last_name,\r\n              major: form.major\r\n            })\r\n          }\r\n        })\r\n      } catch (error) {\r\n        console.error('Registration error:', error)\r\n        ElMessage.error(error.response?.data?.error || 'Registration failed')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    return {\r\n      form,\r\n      formRef,\r\n      rules,\r\n      loading,\r\n      handleSubmit,\r\n      handleFileChange,\r\n      beforeUpload\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.registration-container {\r\n  padding: 20px;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.registration-card {\r\n  width: 500px;\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  color: #409EFF;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.avatar-uploader {\r\n  text-align: center;\r\n}\r\n\r\n.avatar-uploader .avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n  line-height: 178px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}