{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/hp/SOFTWARE/OFFICIAL APP/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/hp/SOFTWARE/OFFICIAL APP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"C:/Users/hp/SOFTWARE/OFFICIAL APP/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport axios from 'axios';\nexport default {\n  name: 'StudentHistory',\n  data: function data() {\n    return {\n      students: [],\n      loading: true,\n      error: null,\n      searchQuery: '',\n      selectedMajor: '',\n      currentPage: 1,\n      itemsPerPage: 10,\n      sortField: 'created_at',\n      sortOrder: 'desc',\n      selectedStudent: null\n    };\n  },\n  computed: {\n    filteredStudents: function filteredStudents() {\n      var _this = this;\n      var filtered = this.students;\n\n      // Filtre par recherche\n      if (this.searchQuery) {\n        var query = this.searchQuery.toLowerCase();\n        filtered = filtered.filter(function (student) {\n          return student.student_id.toLowerCase().includes(query) || student.first_name.toLowerCase().includes(query) || student.last_name.toLowerCase().includes(query);\n        });\n      }\n\n      // Filtre par filière\n      if (this.selectedMajor) {\n        filtered = filtered.filter(function (student) {\n          return student.major === _this.selectedMajor;\n        });\n      }\n\n      // Tri\n      filtered.sort(function (a, b) {\n        var aValue = a[_this.sortField];\n        var bValue = b[_this.sortField];\n        return _this.sortOrder === 'asc' ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\n      });\n\n      // Pagination\n      var start = (this.currentPage - 1) * this.itemsPerPage;\n      var end = start + this.itemsPerPage;\n      return filtered.slice(start, end);\n    },\n    totalPages: function totalPages() {\n      return Math.ceil(this.filteredStudents.length / this.itemsPerPage);\n    },\n    uniqueMajors: function uniqueMajors() {\n      return _toConsumableArray(new Set(this.students.map(function (student) {\n        return student.major;\n      })));\n    }\n  },\n  methods: {\n    fetchStudents: function fetchStudents() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get('http://localhost:3000/api/students');\n            case 3:\n              response = _context.sent;\n              _this2.students = response.data;\n              _this2.loading = false;\n              _context.next = 13;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              _this2.error = 'Erreur lors du chargement des données';\n              _this2.loading = false;\n              console.error('Erreur:', _context.t0);\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8]]);\n      }))();\n    },\n    sortBy: function sortBy(field) {\n      if (this.sortField === field) {\n        this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\n      } else {\n        this.sortField = field;\n        this.sortOrder = 'asc';\n      }\n    },\n    formatDate: function formatDate(dateString) {\n      var date = new Date(dateString);\n      return date.toLocaleDateString('fr-FR', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    viewDetails: function viewDetails(student) {\n      this.selectedStudent = student;\n    }\n  },\n  mounted: function mounted() {\n    this.fetchStudents();\n  }\n};","map":{"version":3,"names":["axios","name","data","students","loading","error","searchQuery","selectedMajor","currentPage","itemsPerPage","sortField","sortOrder","selectedStudent","computed","filteredStudents","_this","filtered","query","toLowerCase","filter","student","student_id","includes","first_name","last_name","major","sort","a","b","aValue","bValue","localeCompare","start","end","slice","totalPages","Math","ceil","length","uniqueMajors","_toConsumableArray","Set","map","methods","fetchStudents","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","t0","console","stop","sortBy","field","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","viewDetails","mounted"],"sources":["C:\\Users\\hp\\SOFTWARE\\OFFICIAL APP\\frontend\\src\\components\\StudentHistory.vue"],"sourcesContent":["<template>\r\n  <div class=\"student-history\">\r\n    <h2>Student Registred History</h2>\r\n    \r\n    <div class=\"filters\">\r\n      <input \r\n        v-model=\"searchQuery\" \r\n        type=\"text\" \r\n        placeholder=\"Search a student...\"\r\n        class=\"search-input\"\r\n      />\r\n      <select v-model=\"selectedMajor\" class=\"major-select\">\r\n        <option value=\"\">All Majors</option>\r\n        <option v-for=\"major in uniqueMajors\" :key=\"major\" :value=\"major\">\r\n          {{ major }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">\r\n      Loading data...\r\n    </div>\r\n\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      {{ error }}\r\n    </div>\r\n\r\n    <div v-else>\r\n      <table class=\"student-table\">\r\n        <thead>\r\n          <tr>\r\n            <th @click=\"sortBy('student_id')\">Student ID</th>\r\n            <th @click=\"sortBy('first_name')\">First Name</th>\r\n            <th @click=\"sortBy('last_name')\">Last Name</th>\r\n            <th @click=\"sortBy('major')\">Major</th>\r\n            <th @click=\"sortBy('created_at')\">Registration Date</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"student in filteredStudents\" :key=\"student.id\">\r\n            <td>{{ student.student_id }}</td>\r\n            <td>{{ student.first_name }}</td>\r\n            <td>{{ student.last_name }}</td>\r\n            <td>{{ student.major }}</td>\r\n            <td>{{ formatDate(student.created_at) }}</td>\r\n            <td>\r\n              <button @click=\"viewDetails(student)\" class=\"view-btn\">\r\n                View details\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <div class=\"pagination\">\r\n        <button \r\n          @click=\"currentPage--\" \r\n          :disabled=\"currentPage === 1\"\r\n          class=\"pagination-btn\"\r\n        >\r\n          Previous\r\n        </button>\r\n        <span>Page {{ currentPage }} sur {{ totalPages }}</span>\r\n        <button \r\n          @click=\"currentPage++\" \r\n          :disabled=\"currentPage === totalPages\"\r\n          class=\"pagination-btn\"\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal pour les détails -->\r\n    <div v-if=\"selectedStudent\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <span class=\"close\" @click=\"selectedStudent = null\">&times;</span>\r\n        <h3>Student Details</h3>\r\n        <div class=\"student-details\">\r\n          <img \r\n            :src=\"selectedStudent.profile_picture\" \r\n            :alt=\"selectedStudent.first_name\"\r\n            class=\"student-image\"\r\n          />\r\n          <div class=\"details-info\">\r\n            <p><strong>ID:</strong> {{ selectedStudent.student_id }}</p>\r\n            <p><strong>Nom:</strong> {{ selectedStudent.last_name }}</p>\r\n            <p><strong>Prénom:</strong> {{ selectedStudent.first_name }}</p>\r\n            <p><strong>Filière:</strong> {{ selectedStudent.major }}</p>\r\n            <p><strong>Date d'enregistrement:</strong> {{ formatDate(selectedStudent.created_at) }}</p>\r\n            <img \r\n              :src=\"`http://localhost:3000/qrcodes/${selectedStudent.qr_code}.png`\" \r\n              :alt=\"`QR Code de ${selectedStudent.first_name}`\"\r\n              class=\"qr-code\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'StudentHistory',\r\n  data() {\r\n    return {\r\n      students: [],\r\n      loading: true,\r\n      error: null,\r\n      searchQuery: '',\r\n      selectedMajor: '',\r\n      currentPage: 1,\r\n      itemsPerPage: 10,\r\n      sortField: 'created_at',\r\n      sortOrder: 'desc',\r\n      selectedStudent: null\r\n    };\r\n  },\r\n  computed: {\r\n    filteredStudents() {\r\n      let filtered = this.students;\r\n      \r\n      // Filtre par recherche\r\n      if (this.searchQuery) {\r\n        const query = this.searchQuery.toLowerCase();\r\n        filtered = filtered.filter(student => \r\n          student.student_id.toLowerCase().includes(query) ||\r\n          student.first_name.toLowerCase().includes(query) ||\r\n          student.last_name.toLowerCase().includes(query)\r\n        );\r\n      }\r\n      \r\n      // Filtre par filière\r\n      if (this.selectedMajor) {\r\n        filtered = filtered.filter(student => \r\n          student.major === this.selectedMajor\r\n        );\r\n      }\r\n      \r\n      // Tri\r\n      filtered.sort((a, b) => {\r\n        const aValue = a[this.sortField];\r\n        const bValue = b[this.sortField];\r\n        return this.sortOrder === 'asc' \r\n          ? aValue.localeCompare(bValue)\r\n          : bValue.localeCompare(aValue);\r\n      });\r\n      \r\n      // Pagination\r\n      const start = (this.currentPage - 1) * this.itemsPerPage;\r\n      const end = start + this.itemsPerPage;\r\n      return filtered.slice(start, end);\r\n    },\r\n    totalPages() {\r\n      return Math.ceil(this.filteredStudents.length / this.itemsPerPage);\r\n    },\r\n    uniqueMajors() {\r\n      return [...new Set(this.students.map(student => student.major))];\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchStudents() {\r\n      try {\r\n        const response = await axios.get('http://localhost:3000/api/students');\r\n        this.students = response.data;\r\n        this.loading = false;\r\n      } catch (error) {\r\n        this.error = 'Erreur lors du chargement des données';\r\n        this.loading = false;\r\n        console.error('Erreur:', error);\r\n      }\r\n    },\r\n    sortBy(field) {\r\n      if (this.sortField === field) {\r\n        this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\r\n      } else {\r\n        this.sortField = field;\r\n        this.sortOrder = 'asc';\r\n      }\r\n    },\r\n    formatDate(dateString) {\r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString('fr-FR', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    },\r\n    viewDetails(student) {\r\n      this.selectedStudent = student;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchStudents();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.student-history {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.filters {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.search-input, .major-select {\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.student-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.student-table th, .student-table td {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.student-table th {\r\n  background-color: #f5f5f5;\r\n  cursor: pointer;\r\n}\r\n\r\n.student-table th:hover {\r\n  background-color: #e9e9e9;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.pagination-btn {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n}\r\n\r\n.pagination-btn:disabled {\r\n  background-color: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.modal {\r\n  display: block;\r\n  position: fixed;\r\n  z-index: 1;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0,0,0,0.4);\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fefefe;\r\n  margin: 5% auto;\r\n  padding: 20px;\r\n  border: 1px solid #888;\r\n  width: 80%;\r\n  max-width: 600px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.close {\r\n  color: #aaa;\r\n  float: right;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n}\r\n\r\n.close:hover {\r\n  color: black;\r\n}\r\n\r\n.student-details {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.student-image {\r\n  width: 150px;\r\n  height: 150px;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n}\r\n\r\n.details-info {\r\n  flex: 1;\r\n}\r\n\r\n.qr-code {\r\n  width: 150px;\r\n  height: 150px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.view-btn {\r\n  padding: 6px 12px;\r\n  background-color: #2196F3;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.view-btn:hover {\r\n  background-color: #0b7dda;\r\n}\r\n\r\n.loading, .error {\r\n  text-align: center;\r\n  padding: 20px;\r\n  font-size: 18px;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}